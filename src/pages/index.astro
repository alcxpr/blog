---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import BlogList from "../components/BlogList.astro";
import SearchBar from "../components/SearchBar.astro";
import { SITE } from "../config";
import { getPublishedPostsSorted } from "../utils/posts";

const allPosts = await getCollection("blog");
const posts = getPublishedPostsSorted(allPosts);
---

<BaseLayout>
  <article>
    <h1>{SITE.title}</h1>
    <SearchBar />
    <BlogList posts={posts} />
  </article>
</BaseLayout>
